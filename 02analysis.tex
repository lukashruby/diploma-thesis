% !TeX root = thesis.tex

\chap Analysis

This chapter is dedicated to the analysis of various topics related to this thesis. In first part, current trends in shipments of devices will be introduced. This introduction will be followed by analysis of latest in-car infotainment solutions including their advantages and disadvantages. Then, the basic facts about various types of communication in automotive environment will be explained. The last section of this chapter is devoted to cloud computing topic and its externsion to in-vehicular use.

\sec Usage of portable devices

The shipments of portable devices are facing big changes recently. Sales of traditional PCs are decreasing every year. On the other side, the shipments of portable devices (mainly mobile phones and so-called ultramobile devices) are experiencing the opposite trend. As we can see in table \ref[devices_shipments], the numbers are increasing \rfc{move the footnotes to the table} \fnote{The {\bf Ultramobile (Premium)} category includes devices such as Microsoft's Windows 8 Intel x86 products and Apple's MacBook Air.} \fnote{The {\bf Ultramobile (Tablets and Clamshells)} category includes devices such as, iPad, iPad mini, Samsung Galaxy Tab S 10.5, Nexus 7 and Acer Iconia Tab 8.}. According to Gartner \cite[atwal2013forecast] the mobile phone shipment are by far the largest. These numbers are hinting what kind of devices are customers using the most and consequently what devices will be most probably used while driving. 
\midinsert \clabel[devices_shipments]{Worldwide Devices Shipments by Device Type, 2014-2017 (Millions of Units)}
\ctable{lrrrr}{
\hfil Device Type & 2014 & 2015 & 2016 & 2017 \crl \tskip4pt
Traditional PCs (Desk-Based and Notebook) & 277 & 251 & 243 & 233 \cr
Ultramobiles (Premium) & 37 & 49 & 68 & 89 \cr
{\bf PC Market} & {\bf 314} & {\bf 300} & {\bf 311} & {\bf 322} \cr
Ultramobiles (Tablets and Clamshells) & 226 & 214 & 228 & 244 \cr
{\bf Computing Devices Market} & {\bf 540} & {\bf 514} & {\bf 539} & {\bf 566} \cr
Mobile Phones & 1879 & 1940 & 2007 & 2062 \cr
{\bf Total Devices Market }& {\bf 2419} & {\bf 2454} & {\bf 2546} & {\bf 2628} \cr
}
\caption/t Worldwide Devices Shipments by Device Type, 2014-2017 (Millions~of~Units)~\cite[atwal2013forecast]
\endinsert

\rfc{what about internet users?}


\sec In-car devices and controls

Driving a car is a stressful task. Distraction is the number one reason for traffic accidents. The reasons are obvious:

\begitems
* Technological developemt is faster that the capability to handle it. Product lifecycle (in automotive environment)  is getting shorter - from more than 4 years to less than 18 months.
* Infotainment systems functionality is increasing, but the human processing capacity is the same.
* Complexity of whole eco system of human mobility is continously increasing: \rfc{cite riener}
	\begitems
	* High volume of traffic
	* More miles driven
	* Complex road infrastructure
	* Overusage of road signs
	\enditems
\enditems

Hardware interfaces are a mixture of knobs, buttons, sliders, and switches in the car. These controls are called {\bf Tangible User Interfaces} \cite[ishii2008tangible]. They are the traditional car on touch and physical environment. They allow the driver to control the car. In the last decades the mechnical buttons have changed to electrical switches with microcontrollers. The measurement equipment was replaced with screens. The whole car infrastructure became digital. This change is following similar changes in the digital personal devices. 

There are other devices in the car or devices the driver and passengers will bring to the car, which will require wired or wireless connection. First USB, for MP3 players, phone, or it can be used to charge some of the mobile devices while driving. Some cars may provide flash memory slot supporting different types and allowing music playback or allow replication to the in-car hard drive. 

The car may also provide an WiFi connection in several different setups. Other mobile devices the driver and the passengers bring to the car must be consibered. The top level car may also provide HDMI for in-car screens located on the dashboard and back seats.


\sec In-car mobile applications

In this section the imporant vendors of mobile applications aimed for in-car use will be introduces. The two most popular competitors - Android Auto and Apple CarPlay will be presented  in details. Other vendors of applications available on /rfc{on?} various mobile application stores will be featured.
 
\secc Android Auto

Android Auto is an app that integrates with a car to make it easier for driver to use some of the main features of the Android phone while driving. Driver can control things like navigation, music, and the phone's dialer from the car's digital display so driver can stay focused on the road. Android Auto app can be downloaded on Google Play\urlnote{https://play.google.com/store?hl=en}. There is also a need for compatible car or aftermarket unit. Most Android phones running Android 5.0 Lollipop can run Android Auto in a compatible car or aftermarket unit. In addition to the phone itself, Android Auto requires a data connection and a Google Account \urlnote{https://accounts.google.com/SignUp} to download the app from the Google Play Store. \cite[androidauto]

Communication with the phone is ensured by USB cable which provides data transfer and recharging capabilities. In-dashboard system uses also the internet data plan from the phone. On figure \ref[android_auto_golf] is shown the general concept of using the Android Auto ecosystem. On figure \ref[android_auto_maps] is then shown the navigational feature using Google Maps.

\midinsert \clabel[android_auto_golf]{Android Auto App running in Volkswagen Golf Mk. 6}
\picw=\hsize \cinspic resources/images/android_auto_golf.jpg
\caption/f Android Auto App running in Volkswagen Golf Mk. 6
\endinsert

\midinsert \clabel[android_auto_maps]{Screenshot of Google Maps in Android Auto App}
\picw=10cm \cinspic resources/images/android_auto.jpg
\caption/f Screenshot of Google Maps in Android Auto App
\endinsert

\rfc{maybe add sth about low distraction - only music, calls, messages, maps}

\secc Apple CarPlay

Apple CarPlay is main competitor of Android Auto. It offers a way to use Apple iPhone smartphones in vehicles. Example of integration this system to car is at \rfc{at?in?} figure \ref[apple_carplay]. Key features of Apple CarPlay include the following: \cite[applecarplay]
\begitems
	* Maps
	* Messages
	* Phone
	* Music
	* 3rd Party Apps
\enditems

\midinsert \clabel[apple_carplay]{Car dashboard with running Apple CarPlay}
\picw=\hsize \cinspic resources/images/apple_carplay.jpg
\caption/f Car dashboard with running Apple CarPlay
\endinsert

\secc Other vendors

Android Auto and Apple CarPlay are not only available solutions of infotainment systems. Almost every car manufacturer develops own solution of IVIS, e.g. BMW ConnectedDrive\urlnote{www.bmw.es/connecteddrive}, Ford Sync\urlnote{www.ford.com/technology/sync} or General Motors' OnStar\urlnote{https://www.onstar.com/us/en/home.html}. Apple's and Google's solutions were chosen because they both offer an open platform for 3rd party developers to publish their applications to well-known application stores.

\sec Data \& comumunication

\secc In-vehicle real-time busses

{\bf Controller Area Network Bus (CAN-BUS)} - Bosch originally developed the Controller Area Network (CAN) in 1985 for in-vehicle networks. In the past, automotive manufacturers connected electronic devices in vehicles using point-to-point wiring systems. As more and more electronics started to be used in vehicles, the situation led to very complex and confusional systems that were heavy and expensive. They then replaced dedicated wiring with in-vehicle networks, which reduced wiring cost, complexity, and weight. CAN is a high-integrity serial bus system for networking intelligent devices, developed as the standard in-vehicle network. Whole automotive industry quickly adopted CAN and  it became the international standard in 1993 known as ISO 11898.  \cite[etschberger2001controller]

{\bf FlexRay} - The FlexRay communications bus is a deterministic, fault-tolerant and high-speed bus system developed in conjunction with automobile manufacturers and leading suppliers. FlexRay delivers the error tolerance and time-determinism performance requirements for x-by-wire applications (i.e. drive-by-wire, steer-by-wire, brake-by-wire, etc.). This bus was developed to provide features that CAN cannot offer (e.g. synchronization or high performance)\cite[ni2009flexray].

\secc On-board Diagnostics (OBD)

The first generation of On-Board Diagnostic requirements, called OBD I, was developed by the California Air Resources Board (ARB) and implemented in 1988. As technology and the desire to expand On-Board Diagnostic capability increased, a second-generation of On-Board Diagnostics requirements was developed. This second version of On-Board Diagnostic capabilities is called "OBD II". The Clean Air Act Amendments of 1990 mandated that, beginning with the 1996 model year, all light-duty vehicle and trucks made available for sale outside of the state of California must also be equipped with OBDII. In addition, EPA also requires that medium duty vehicles up to 14,000 pounds must also be equipped with OBD II systems beginning in the 2004 model year. In the future, EPA expects that all heavy-duty vehicles over 14,000 pounds will eventually be equipped with OBDII systems.

http://www3.epa.gov/obd/basic.htm

On-Board Diagnostics, or "OBD," is a computer-based system built into all 1996 and later light-duty vehicles and trucks, as required by the Clean Air Act Amendments of 1990. OBD systems are designed to monitor the performance of some of an engine's major components including those responsible for controlling emissions. 
OBD is a valuable tool that assists in the service and repair of vehicles by providing a simple, quick, and effective way to pinpoint problems by retrieving vital automobile diagnostics from the OBD systems.
OBD plays an important role where vehicle inspection and maintenance programs are required.
OBD serves as an early warning system that alerts you to the potential need for vehicle repair through the "Check Engine" light on the dashboard of your vehicle.
OBD systems are required by EPA to be installed on light-duty vehicles and trucks, as well as heavy-duty engines.

(http://www3.epa.gov/obd/)

\secc Other types of communication

\seccc Bluetooth

\seccc Data communication (3G, 4G)


\rfc{busses in car, OBD, CANBUS, FLEXRAY, BlueTooth, Internet connection}

\sec Mobile platforms

Nowadays, mobile devices are shipped with various operating system. In this section are introduces the most important mobile operating system's vendors. \rfc{add table to sumarize the sales}

\secc Android 

Android is open source from Google Inc. As it is the most used mobile operating system, it was chosen as the target platform for the purposes of this thesis and it is described in detail in further sections. \cite[androidcom]

\secc iOS

iOS (also known as iPhone OS) is being developed by Apple Inc.~\cite[ios] It is closed sourced and proprietaly and is supposed to run only on deviced produced by Apple Inc - Apple iPhone, iPod Touch, iPad and Apple TV. It allows to install native third party applications.

\secc Windows Phone (Windows 10 Mobile)

Windows Phone is closed sourced an proprietary mobile operating system from Microsoft~\cite[windowsphone]. It offers rich integration with other serviced provided by Microsoft such as OneDrive, Xbox Music \& Video, Bing and Office. From January 2015 it is rebranded as Windows 10 Phone. 

\secc BlackBerry

BlackBerry (currently version 10) was one of the dominant platform in mobile world once. It is closed source and proprietaly operating systems and run only on deviced procudes by BlackBerry. By the end of 2014 the market shares were less than half of percent.~\cite[blackberryos]

\secc Firefox OS

Firefox OS is from Mozilla~\cite[firefoxos]. It is released under the Mozilla Public Licence and uses kernel and drivers from Android. 

\secc Sailfish OS

Sailfish OS is from finnish company Jolla~\cite[sailfishosorg]. This operating system (and company) was established by former employees of Nokia and its abandoned operating system MeeGo. Sailfish OS is partly open sourced under GPL licence.  

\secc Tizen

Linux based operating system Tized is developed by Linux Foundation~\cite[tizenorg], Tizen Association, Samsung and Intel. It is based on Linux kernel and C library implementing Linux API. It is not only mobile operating system but also targets to wide range of devices including smart TVs, smart cameras, wearables, in-vehicle infotainment devices and printers. It is open source software.

\secc Ubuntu Phone OS

Ubuntu Phone is open source OS from Canonical Ltd.~\cite[ubuntuphone] It is a mobile version of desktop OS produced by the same company. It uses kernel and drivers from Android similary as Firefox OS. 

\sec Android mobile platform

Android is a software stack for mobile devices that includes an operating system, middleware and key applications. The various components of Android are designed as a stack, with the ‘Applications’ forming the top layer of the stack, while the Linux kernel forms the lowest layer. Android ships with a set of core applications including an e-mail client, SMS program, calendar, maps, browser, contacts, and other features. All applications are written using the Java programming language.

Developers have full access to the same framework APIs used by the core applications. The application architecture is designed to simplify the reuse of components; the capabilities of any application can be published and then be made use of by any other application (subject to security constraints enforced by the framework). This same mechanism allows components to be replaced by the user.

Android includes a set of core libraries that provides most of the functionality available in the core libraries of the Java programming language. Every Android  aplication runs in its own process, with its own instance of the Dalvik virtual machine. Dalvik has been written so that a device can run multiple VMs efficiently. The Dalvik VM executes files in the Dalvik Executable (.dex) format, which is optimised for minimal memory footprint. The VM is register-based, and runs classes compiled by a Java language compiler that has been transformed into the .dex format by the included dx tool. The Dalvik VM relies on the Linux kernel for underlying functionality such as threading and low-level memory management. \cite[developers2011android]

\secc Brief history of Android operating system 

In this subsection a brief history of Android plarform~\cite[androidcom] is presented. Knowing the history of the operating system is important to undestand further parts of this work. 

\seccc Android 1.0

The very first version of Android was released in October 22nd, 2008 when the first smartphone - T-Mobile G1 launched in the United Stated. This version lacked many functionallity such as on-screen keyboard (T-Mobile G1 was equipped with hardware keyboard) or multitouch capability. On the other side, many functions that are imporant even in latest version were introduces: Gmail integration, Android Market or Pull-down notification window. 

\seccc Android 1.1

This version showed that update of the smartphone's operating system can be quick and painless.

\seccc Android 1.5 Cupcake

Released in April 2009, half a year after first G1s were shipped, this version added on-screen keyboard, clipboard (copy\&paste) support and video capture and playback. This version also started the sweet'naming convention when every version of operating system is named after some dessert starting with letters in alphaberical order. The classical Google's search box was included as well.

\seccc Android 1.6 Donut

Andorid 1.6 added support for CDMA networks which led to increased sales in US and Asia where mobile carriers were running these types of mobile networks. The support for different resolutions was added: QVGA, HVGA, WVGA, FWVGA, qHD and 720p. 

\seccc Android 2.0 / 2.1 Eclair

Released one year after the Android's premire, this version offered support for multiple Google accouns, Google Maps Navigation, speech to text and new swiping unlock screen. With the Android 2.1, the new stock-Android phone was introduces  - Google Nexus One. 

\seccc Android 2.2 Froyo

Froyo confirmed the position of Nexus phones as Google Nexus One got the upgrade first. This version also added support for mobile hotspot which was immediately disabled by many carriers. 

\seccc Android 2.3 Gingerbread

Half year after Froyo, Android 2.3. Gingerbread was released. Beside improvements of keyboard or copy\&paste, Google started to care about battery life. Poor developed applications had been able to drain phone's battery in very short time. Gingerbread brought tools to monitor battery usage. Another important feature that came with this version was support for front facing cameras and NFC.

\seccc Android 3 Honeycomb

This version was not aimed for usage on phones. The main target were tablets. Google switched from green colors palette to blue one. Honeycomb previewed an important redesign of whole platform's user interface.

\seccc Android 4.0 Ice Cream Sandwich

Android 4.0 was without any doubts the biggest change for the Android ecosystem so far. Majority of graphical elements was redesigned, new bespoke font called Roboto camed. 

\seccc Android 4.1 Jelly Bean

Jelly Bean firstly came with the application Google Now which is advanced predictive and question-answering system present in whole Google's platforms. Minor design changes were performed and system applications were improved. Google also started to advertise the Play Store Edition of selected smartphone that offered stock Android running on phones by various manufacturers. This approach was not successfull and later Google returned back to Nexus series.

\seccc Android 4.4 KitKat

The main aim for this version was to make Android faster, more efficient and less resource intensive. The Nexus 5 smartphone was firstly released with this version.


\seccc \label[android5] Android 5 Lollipop 

Fistly named just Android L, this version came with so called Material Design. Google wanted to unified user interfaces of 3rd party application and provide guidelines for developers. Android Wear and Android Auto concepts were introduced. 

\seccc Android 6 Marshmallow

In the time of publishing this work. Android 6 is the latest version. It concerns about energy consuption and security of users. Marshmallow allows applications to ask for permission to some resource while using the application. Before that permissions were asked only during installation process.


\sec Cloud computing

The smartphone connected to the internet is the key in the car ecosystem. All smartphone allow access to traditional desktop applications such as PIM managers. Most of the downloadable applications are using large databases to store the user’s data and profiles. 

For the purposes of this thesis, cloud computing is used as environment to host the logging server. \rfc{sth like the used components are following ... or similar}

\secc The NIST Definition of Cloud Computing

National Instite of Standards and Technology (\glref{NIST}) defined the cloud model as composition of five essential characteristics, three service models and four deployment models~\cite[mell2009nist].

\seccc Essential Characteristics

\begitems
	*{\bf On-demand self-service} - A consumer can change capatibilies (processor time, memory, storage etc.) automatically without requiring human interaction.
	*{\bf Broad network access} - Capabilities are available over the network using standard mechanisms.
	*{\bf Resource pooling} - Provider's computing resources are pooled to serve multiple consumers. These resources are location independent.
	*{\bf Rapid elasticity} - Capabilities can be elastically provisioned and released. Capabilities available for provisioning ofter appear to be unlimited from the consumer's point of view.
	*{\bf Measured service} - System controls a optimizes resource usage. The usage of resources is monitored, controlled and reported to provide transparency for provider and consumer of the utilized service.
\enditems

\seccc Service Models

\begitems
	*{\bf Software as a Service (SaaS)} - Consumer uses provider's applications running on a cloud infrastructure. Applications are accessible from various client devices (e.g., web-browser, third party application or API). Consumer does not manage or control underlying cloud infrastructure neither individual application capabilities but can control user specific application configuration.
	*{\bf Platform as a Service (PaaS)} - Consumer has a capability to deploy onto the cloud custom applications created using the environment supported by the provider. Consumer does not manage or control underlying cloud infrastructure but has control over the deployed applications and can configurate settings for the application environment.
	*{\bf Infrastructure as a Service (IaaS)} - Consumer provisions directly processing, storage, networks, and other fundamental computing resources where is able to deploy and run arbitraty software (including operating systems). Customer does not manage the underlying infrastructure but has control over OSs, storage, and deployed applications.
\enditems

\seccc Deployment Models

\begitems
	*{\bf Private cloud} - The cloud infrastructure is provisioned for single organization use. It can be owned directly by the organization or provided by a third party.
	*{\bf Comunnity cloud} - The cloud infrastructure is provisioned for the specific single community of consumers. It can be owned by one or more community's member or a third party.
	*{\bf Public cloud} - The cloud infrastructure is provided for open use by the general public. It exists on the premises of the cloud provider.
	*{\bf Hybrid cloud} - The cloud infrastructure is a composition of two or more previously mentioned models that are bound together by standartized or proprietary technology to enable data and application portability.
	
\enditems

